(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){"use strict";(function(e){var n=a(37),r=a.n(n),o=a(6),s=a(70),c=a(27),i=a(28),l=a(30),u=a(29),m=a(31),d=a(3),f=a(0),h=a.n(f),g=a(130),p=a.n(g),v=a(23),b=a(134),O=a.n(b),j=a(52),E=a.n(j),y=a(131),w=a(133),k=a(22),S=function(t){function a(e){var t;return Object(c.a)(this,a),(t=Object(l.a)(this,Object(u.a)(a).call(this,e))).connect=new p.a({appUrl:"http://localhost:5000"}),t.state={form:{from:"",message:"",signature:""},accounts:[],currentId:1,authorized:null,error:null},t.errorNotification=t.errorNotification.bind(Object(d.a)(Object(d.a)(t))),t.sign=t.sign.bind(Object(d.a)(Object(d.a)(t))),t.signTypedData=t.signTypedData.bind(Object(d.a)(Object(d.a)(t))),t.personalSign=t.personalSign.bind(Object(d.a)(Object(d.a)(t))),t.recover=t.recover.bind(Object(d.a)(Object(d.a)(t))),t.requestAccount=t.requestAccount.bind(Object(d.a)(Object(d.a)(t))),t.onClickSignInButton=t.onClickSignInButton.bind(Object(d.a)(Object(d.a)(t))),t.onClickSignOutButton=t.onClickSignOutButton.bind(Object(d.a)(Object(d.a)(t))),t.onChangeEndpassForm=t.onChangeEndpassForm.bind(Object(d.a)(Object(d.a)(t))),t}return Object(m.a)(a,t),Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getAccountDataAndInjectWeb3()}},{key:"getAccountDataAndInjectWeb3",value:function(){var e=Object(s.a)(r.a.mark(function e(){var t,a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.connect.getAccountData();case 3:t=e.sent,a=t.activeAccount,n=t.activeNet,this.connect.injectWeb3(),this.connect.sendSettings({selectedAddress:a,networkVersion:n}),this.setState(Object(o.a)({},this.state,{authorized:!0,accounts:[a],form:Object(o.a)({},this.state.form,{from:a})})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),this.setState(Object(o.a)({},this.state,{authorized:!1,accounts:[],accountData:null}));case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"isNewWeb3",value:function(){return!Array.isArray(window.web3.accounts)}},{key:"errorNotification",value:function(){new Notification("Action denied",{body:"An error occured, see console for more details"})}},{key:"makeRequest",value:function(e,t,a){var n=this.state.currentId;(window.ethereum||window.web3.currentProvider).sendAsync({id:n,jsonrpc:"2.0",method:e,params:t},a)}},{key:"recover",value:function(){var e=this,t=this.state.form,a=t.message,n=t.signature;this.makeRequest("personal_ecRecover",[a,n],function(t,a){var n=a.result;if(t)return e.errorNotification(),void console.error(t);alert("Address verified. Recovered address: ".concat(n))})}},{key:"sign",value:function(){var t=this,a=this.state.form,n=a.from,r=a.message;this.makeRequest("eth_sign",[n,"0x".concat(e.from(r,"utf8").toString("hex"))],function(e,a){var n=a.result;if(e)return t.errorNotification(),void console.error(e);t.setState(function(e){return Object(o.a)({},e,{signature:n})})})}},{key:"signTypedData",value:function(){var e=this,t=this.state.from,a=[{type:"string",name:"Message",value:"Hi, Alice!"},{type:"uint32",name:"A number",value:"1337"}];this.setState(Object(o.a)({},this.state,{form:Object(o.a)({},this.state.form,{message:JSON.stringify(a,null,2)})})),this.makeRequest("eth_signTypedData",[a,t],function(t,a){if(t)return e.errorNotification(),void console.error(t);e.setState(function(e){return Object(o.a)({},e,{form:Object(o.a)({},e.form,{signature:a.result})})})})}},{key:"personalSign",value:function(){var t=this,a=this.state.form,n=this.isNewWeb3(),r=[a.from,"0x".concat(e.from(a.message,"utf8").toString("hex"))];this.makeRequest("personal_sign",n?r.reverse():r,function(e,a){var n=a.result;if(e)return t.errorNotification(),void console.error(e);t.setState(function(e){return Object(o.a)({},e,{form:Object(o.a)({},e.form,{signature:n})})})})}},{key:"requestAccount",value:function(){var e=this;this.makeRequest("eth_accounts",[],function(t,a){var n=a.result;if(t)return e.errorNotification(),void console.error(t);e.setState(function(e){return Object(o.a)({},e,{accounts:n,form:Object(o.a)({},e.form,{from:n[0]})})})})}},{key:"onChangeEndpassForm",value:function(e){this.setState(Object(o.a)({},this.state,{form:Object(o.a)({},this.state.form,e)}))}},{key:"onClickSignInButton",value:function(){var e=Object(s.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.connect.auth();case 3:return e.next=5,this.getAccountDataAndInjectWeb3();case 5:this.setState(Object(o.a)({},this.state,{error:null})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.setState(Object(o.a)({},this.state,{error:e.t0.toString()}));case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"onClickSignOutButton",value:function(){var e=Object(s.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.connect.logout();case 3:this.setState(Object(o.a)({},this.state,{form:{from:"",message:"",signature:""},authorized:!1,accountData:null})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.setState(Object(o.a)({},this.state,{error:e.t0.toString()}));case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){var e=this.state,t=e.authorized,a=e.form,n=e.message,r=e.signature,o=e.accounts,s=this.props.classes;return null===t?h.a.createElement("div",{className:s.loader},h.a.createElement(O.a,null)):h.a.createElement("div",null,t?h.a.createElement(w.a,{form:a,message:n,signature:r,accounts:o,onSign:this.sign,onSignTypedData:this.signTypedData,onRecover:this.recover,onPresonalSign:this.personalSign,onRequestAccount:this.requestAccount,onSignOut:this.onClickSignOutButton,onChange:this.onChangeEndpassForm}):h.a.createElement(y.a,{onSignIn:this.onClickSignInButton}))}},{key:"render",value:function(){var e=this.state.error,t=this.props.classes;return h.a.createElement("div",null,e&&h.a.createElement(E.a,{className:t.row,color:"error",variant:"caption"},e),this.renderContent())}}]),a}(h.a.Component);t.a=Object(v.withStyles)(k.a)(S)}).call(this,a(88).Buffer)},131:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(23),s=a(21),c=a.n(s),i=a(22);t.a=Object(o.withStyles)(i.a)(function(e){var t=e.classes,a=e.onSignIn;return r.a.createElement(n.Fragment,null,r.a.createElement(c.a,{variant:"contained",className:t.fluid,onClick:a},"Sign in with Endpass"))})},133:function(e,t,a){"use strict";var n=a(51),r=a(6),o=a(27),s=a(28),c=a(30),i=a(29),l=a(31),u=a(3),m=a(0),d=a.n(m),f=a(23),h=a(69),g=a.n(h),p=a(53),v=a.n(p),b=a(36),O=a.n(b),j=a(8),E=a.n(j),y=a(38),w=a.n(y),k=a(34),S=a.n(k),N=a(21),C=a.n(N),x=a(22),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).onChangeInputByName=a.onChangeInputByName.bind(Object(u.a)(Object(u.a)(a))),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"onChangeInputByName",value:function(e){var t=this,a=this.props.onChange;return function(o){a(Object(r.a)({},t.props.form,Object(n.a)({},e,o.target.value)))}}},{key:"renderAccountsSelect",value:function(){var e=this.props,t=e.classes,a=e.accounts,n=e.form;return d.a.createElement(g.a,{className:t.fluid,value:n.from,disabled:0===a.length,onChange:this.onChangeInputByName("from")},d.a.createElement(v.a,{value:"",disabled:!0},"Select account"),a.map(function(e){return d.a.createElement(v.a,{key:e,value:e},e)}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.form,n=e.onSign,r=e.onSignTypedData,o=e.onRecover,s=e.onPresonalSign,c=e.onSignOut,i=e.onRequestAccount;return d.a.createElement(m.Fragment,null,this.renderAccountsSelect(),d.a.createElement(E.a,{className:t.row,container:!0},d.a.createElement(E.a,{item:!0,xs:6},d.a.createElement(O.a,{multiline:!0,rows:8,className:t.fluid,disabled:!a.from,value:a.message,placeholder:"Enter message to sign...",onChange:this.onChangeInputByName("message")})),d.a.createElement(E.a,{item:!0,xs:6},d.a.createElement(O.a,{multiline:!0,rows:8,className:t.fluid,value:a.signature,placeholder:"Signed data...",onChange:this.onChangeInputByName("signature")}))),d.a.createElement(E.a,null,d.a.createElement(E.a,{item:!0,xs:12},d.a.createElement(C.a,{className:t.row,color:"primary",variant:"contained",onClick:i},"eth_accounts"))),d.a.createElement(S.a,{className:t.field,component:"fieldset"},d.a.createElement(w.a,{className:t.field,component:"legend"},"Common"),d.a.createElement(E.a,null,d.a.createElement(E.a,{item:!0,xs:12},d.a.createElement(C.a,{className:t.row,variant:"contained",disabled:!a.from||!a.message,onClick:n},"eth_sign")))),d.a.createElement(S.a,{className:t.field,component:"fieldset"},d.a.createElement(w.a,{className:t.field,component:"legend"},"Legacy typed data (EIP-712 jsonrpc accepted standard)"),d.a.createElement(E.a,null,d.a.createElement(E.a,{item:!0,xs:12},d.a.createElement(C.a,{className:t.row,variant:"contained",disabled:!a.from,onClick:r},"eth_signTypedData")))),d.a.createElement(S.a,{className:t.field,component:"fieldset"},d.a.createElement(w.a,{className:t.field,component:"legend"},"Personal"),d.a.createElement(E.a,{container:!0,spacing:8},d.a.createElement(E.a,{item:!0,xs:6},d.a.createElement(C.a,{className:t.row,variant:"contained",disabled:!a.from||!a.message,onClick:s},"personal_sign")),d.a.createElement(E.a,{item:!0,xs:6},d.a.createElement(C.a,{className:t.row,variant:"contained",disabled:!a.signature,onClick:o},"personal_ecRecover")))),d.a.createElement(S.a,{className:t.field,component:"fieldset"},d.a.createElement(E.a,null,d.a.createElement(E.a,{item:!0,xs:12},d.a.createElement(C.a,{className:t.row,variant:"contained",color:"secondary",onClick:c},"Sign out from Endpass")))))}}]),t}(d.a.Component);t.a=Object(f.withStyles)(x.a)(A)},135:function(e,t,a){"use strict";(function(e){var n=a(6),r=a(27),o=a(28),s=a(30),c=a(29),i=a(31),l=a(3),u=a(0),m=a.n(u),d=a(23),f=a(52),h=a.n(f),g=a(136),p=a(22),v=function(t){function a(e){var t;return Object(r.a)(this,a),(t=Object(s.a)(this,Object(c.a)(a).call(this,e))).state={form:{from:"",message:"",signature:""},accounts:[],currentId:1,error:null},t.errorNotification=t.errorNotification.bind(Object(l.a)(Object(l.a)(t))),t.sign=t.sign.bind(Object(l.a)(Object(l.a)(t))),t.signTypedData=t.signTypedData.bind(Object(l.a)(Object(l.a)(t))),t.personalSign=t.personalSign.bind(Object(l.a)(Object(l.a)(t))),t.recover=t.recover.bind(Object(l.a)(Object(l.a)(t))),t.requestAccount=t.requestAccount.bind(Object(l.a)(Object(l.a)(t))),t.onChangeCommonForm=t.onChangeCommonForm.bind(Object(l.a)(Object(l.a)(t))),t}return Object(i.a)(a,t),Object(o.a)(a,[{key:"isNewWeb3",value:function(){return!Array.isArray(window.web3.accounts)}},{key:"errorNotification",value:function(){new Notification("Action denied",{body:"An error occured, see console for more details"})}},{key:"makeRequest",value:function(e,t,a){var n=this.state.currentId;(window.ethereum||window.web3.currentProvider).sendAsync({id:n,jsonrpc:"2.0",method:e,params:t},a)}},{key:"recover",value:function(){var e=this,t=this.state.form,a=t.message,n=t.signature;this.makeRequest("personal_ecRecover",[a,n],function(t,a){var n=a.result;if(t)return e.errorNotification(),void console.error(t);alert("Address verified. Recovered address: ".concat(n))})}},{key:"sign",value:function(){var t=this,a=this.state.form,r=a.from,o=a.message;this.makeRequest("eth_sign",[r,"0x".concat(e.from(o,"utf8").toString("hex"))],function(e,a){var r=a.result;if(e)return t.errorNotification(),void console.error(e);t.setState(function(e){return Object(n.a)({},e,{signature:r})})})}},{key:"signTypedData",value:function(){var e=this,t=this.state.from,a=[{type:"string",name:"Message",value:"Hi, Alice!"},{type:"uint32",name:"A number",value:"1337"}];this.setState(Object(n.a)({},this.state,{form:Object(n.a)({},this.state.form,{message:JSON.stringify(a,null,2)})})),this.makeRequest("eth_signTypedData",[a,t],function(t,a){if(t)return e.errorNotification(),void console.error(t);e.setState(function(e){return Object(n.a)({},e,{form:Object(n.a)({},e.form,{signature:a.result})})})})}},{key:"personalSign",value:function(){var t=this,a=this.state.form,r=this.isNewWeb3(),o=[a.from,"0x".concat(e.from(a.message,"utf8").toString("hex"))];this.makeRequest("personal_sign",r?o.reverse():o,function(e,a){var r=a.result;if(e)return t.errorNotification(),void console.error(e);t.setState(function(e){return Object(n.a)({},e,{form:Object(n.a)({},e.form,{signature:r})})})})}},{key:"requestAccount",value:function(){var e=this;this.makeRequest("eth_accounts",[],function(t,a){var r=a.result;if(t)return e.errorNotification(),void console.error(t);e.setState(function(e){return Object(n.a)({},e,{accounts:r,form:Object(n.a)({},e.form,{from:r[0]})})})})}},{key:"onChangeCommonForm",value:function(e){this.setState(Object(n.a)({},this.state,{form:Object(n.a)({},this.state.form,e)}))}},{key:"renderContent",value:function(){var e=this.state,t=e.form,a=e.message,n=e.signature,r=e.accounts;return m.a.createElement("div",null,window.web3?m.a.createElement(g.a,{form:t,message:a,signature:n,accounts:r,onSign:this.sign,onSignTypedData:this.signTypedData,onRecover:this.recover,onPresonalSign:this.personalSign,onRequestAccount:this.requestAccount,onSignOut:this.onClickSignOutButton,onChange:this.onChangeCommonForm}):m.a.createElement(h.a,{variant:"caption",color:"error"},"Provide web3 before testing or reload page if you switched back from Endpass mode"))}},{key:"render",value:function(){var e=this.state.error,t=this.props.classes;return m.a.createElement("div",null,e&&m.a.createElement(h.a,{className:t.row,color:"error",variant:"caption"},e),this.renderContent())}}]),a}(m.a.Component);t.a=Object(d.withStyles)(p.a)(v)}).call(this,a(88).Buffer)},136:function(e,t,a){"use strict";var n=a(51),r=a(6),o=a(27),s=a(28),c=a(30),i=a(29),l=a(31),u=a(3),m=a(0),d=a.n(m),f=a(23),h=a(69),g=a.n(h),p=a(53),v=a.n(p),b=a(36),O=a.n(b),j=a(8),E=a.n(j),y=a(38),w=a.n(y),k=a(34),S=a.n(k),N=a(21),C=a.n(N),x=a(22),A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).onChangeInputByName=a.onChangeInputByName.bind(Object(u.a)(Object(u.a)(a))),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"onChangeInputByName",value:function(e){var t=this,a=this.props.onChange;return function(o){a(Object(r.a)({},t.props.form,Object(n.a)({},e,o.target.value)))}}},{key:"renderAccountsSelect",value:function(){var e=this.props,t=e.classes,a=e.accounts,n=e.form;return d.a.createElement(g.a,{className:t.fluid,value:n.from,disabled:0===a.length,onChange:this.onChangeInputByName("from")},d.a.createElement(v.a,{value:"",disabled:!0},"Select account"),a.map(function(e){return d.a.createElement(v.a,{key:e,value:e},e)}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.form,n=e.onSign,r=e.onSignTypedData,o=e.onRecover,s=e.onPresonalSign,c=e.onRequestAccount;return d.a.createElement(m.Fragment,null,this.renderAccountsSelect(),d.a.createElement(E.a,{className:t.row,container:!0},d.a.createElement(E.a,{item:!0,xs:6},d.a.createElement(O.a,{multiline:!0,rows:8,className:t.fluid,disabled:!a.from,value:a.message,placeholder:"Enter message to sign...",onChange:this.onChangeInputByName("message")})),d.a.createElement(E.a,{item:!0,xs:6},d.a.createElement(O.a,{multiline:!0,rows:8,className:t.fluid,value:a.signature,placeholder:"Signed data...",onChange:this.onChangeInputByName("signature")}))),d.a.createElement(E.a,null,d.a.createElement(E.a,{item:!0,xs:12},d.a.createElement(C.a,{className:t.row,color:"primary",variant:"contained",onClick:c},"eth_accounts"))),d.a.createElement(S.a,{className:t.field,component:"fieldset"},d.a.createElement(w.a,{className:t.field,component:"legend"},"Common"),d.a.createElement(E.a,null,d.a.createElement(E.a,{item:!0,xs:12},d.a.createElement(C.a,{className:t.row,variant:"contained",disabled:!a.from||!a.message,onClick:n},"eth_sign")))),d.a.createElement(S.a,{className:t.field,component:"fieldset"},d.a.createElement(w.a,{className:t.field,component:"legend"},"Legacy typed data (EIP-712 jsonrpc accepted standard)"),d.a.createElement(E.a,null,d.a.createElement(E.a,{item:!0,xs:12},d.a.createElement(C.a,{className:t.row,variant:"contained",disabled:!a.from,onClick:r},"eth_signTypedData")))),d.a.createElement(S.a,{className:t.field,component:"fieldset"},d.a.createElement(w.a,{className:t.field,component:"legend"},"Personal"),d.a.createElement(E.a,{container:!0,spacing:8},d.a.createElement(E.a,{item:!0,xs:6},d.a.createElement(C.a,{className:t.row,variant:"contained",disabled:!a.from||!a.message,onClick:s},"personal_sign")),d.a.createElement(E.a,{item:!0,xs:6},d.a.createElement(C.a,{className:t.row,variant:"contained",disabled:!a.signature,onClick:o},"personal_ecRecover")))))}}]),t}(d.a.Component);t.a=Object(f.withStyles)(x.a)(A)},140:function(e,t,a){e.exports=a(352)},22:function(e,t,a){"use strict";t.a=function(e){return{loader:{textAlign:"center",padding:2*e.spacing.unit},appWrapper:{display:"flex",alignItems:"center",justifyContent:"center"},row:{marginBottom:1.5*e.spacing.unit,width:"100%"},field:{display:"flex",width:"100%",marginRight:0,marginLeft:0,marginBottom:1.5*e.spacing.unit},card:{padding:2*e.spacing.unit,maxWidth:480,margin:"".concat(e.spacing.unit,"px auto")},fluid:{width:"100%"},inlineButton:{flex:"1 1 auto",marginLeft:e.spacing.unit},title:{marginBottom:3*e.spacing.unit}}}},350:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),s=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(6),i=a(27),l=a(28),u=a(30),m=a(29),d=a(31),f=a(3),h=a(23),g=a(8),p=a.n(g),v=a(137),b=a.n(v),O=a(138),j=a.n(O),E=a(139),y=a.n(E),w=a(129),k=a(135),S=a(22),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={endpassMode:!1},a.cachedWeb3=null,a.onSwitchEndpassMode=a.onSwitchEndpassMode.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onSwitchEndpassMode",value:function(){var e=this.state.endpassMode;e&&(window.web3=void 0),this.setState(Object(c.a)({},this.state,{endpassMode:!e}))}},{key:"render",value:function(){var e=this.state.endpassMode,t=this.props.classes;return r.a.createElement("div",{className:t.appWrapper},r.a.createElement(b.a,{className:t.card},r.a.createElement(p.a,{className:t.row,container:!0},r.a.createElement(p.a,{item:!0,xs:12},r.a.createElement(j.a,{control:r.a.createElement(y.a,{checked:e,onChange:this.onSwitchEndpassMode,color:"primary",value:"endpassMode"}),label:"Enable Endpass mode"}))),r.a.createElement(p.a,{container:!0},r.a.createElement(p.a,{xs:12,item:!0},e?r.a.createElement(w.a,null):r.a.createElement(k.a,null)))))}}]),t}(r.a.Component),C=Object(h.withStyles)(S.a)(N);a(350);s.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[140,2,1]]]);
//# sourceMappingURL=main.5130a15a.chunk.js.map